#!/usr/bin/make -f

export PYBUILD_NAME = hyperkitty

%:
	dh $@ --with python2,sphinxdoc --buildsystem=pybuild

override_dh_auto_test:
#	set -e; \
#	for python in $(shell pyversions -r); do \
#		PYTHONPATH="." $$python example_project/manage.py test --settings=test_settings; \
#	done

override_dh_auto_build:
	PYTHONPATH=. sphinx-build -b html -E -N doc build/sphinx/html
	dh_auto_build

override_dh_auto_install:
	dh_auto_install
	# Don't embed fontawesome fonts
	find debian/python-django-hyperkitty -name 'fontawesome-webfont.ttf' -type f -exec \
		ln -sf /usr/share/fonts-font-awesome/fonts/fontawesome-webfont.ttf {} \;
	find debian/python-django-hyperkitty -name 'FontAwesome.otf' -type f -exec \
		ln -sf /usr/share/fonts-font-awesome/fonts/FontAwesome.otf {} \;
